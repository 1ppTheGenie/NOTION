<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Competition Command - Area Ownership Schema ERD v4</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: #f8f9fa; padding: 20px; font-size: 14px; }
        
        .header { text-align: center; margin-bottom: 20px; padding: 20px; background: #fff; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1 { color: #2c3e50; font-size: 1.6em; margin-bottom: 5px; }
        .subtitle { color: #7f8c8d; font-size: 0.95em; }
        .status { display: inline-block; background: #f39c12; color: #fff; padding: 4px 12px; border-radius: 15px; font-size: 0.8em; margin-top: 10px; }
        
        .section { background: #fff; border-radius: 10px; padding: 20px; margin-top: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); page-break-inside: avoid; }
        .section h2 { color: #2c3e50; margin-bottom: 15px; font-size: 1.2em; border-bottom: 2px solid #3498db; padding-bottom: 10px; }
        .section h3 { color: #9b59b6; margin: 25px 0 10px 0; font-size: 1em; }
        
        .table-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-top: 15px; }
        
        .entity-card { background: #fff; border: 2px solid #34495e; border-radius: 8px; overflow: hidden; }
        .entity-card.new { border-color: #27ae60; }
        .entity-card.lookup { border-color: #9b59b6; }
        .entity-card.existing { border-color: #95a5a6; }
        
        .entity-header { padding: 10px 12px; font-weight: bold; font-size: 0.9em; display: flex; justify-content: space-between; align-items: center; }
        .entity-card.new .entity-header { background: #27ae60; color: #fff; }
        .entity-card.lookup .entity-header { background: #9b59b6; color: #fff; }
        .entity-card.existing .entity-header { background: #95a5a6; color: #fff; }
        
        .entity-body { padding: 10px; }
        .col-row { display: flex; padding: 4px 8px; font-size: 0.8em; border-bottom: 1px solid #f0f0f0; }
        .col-row:last-child { border-bottom: none; }
        .col-row.fk { background: #ebf5fb; }
        .col-row.pk { background: #fef9e7; }
        
        .col-key { width: 28px; font-weight: bold; font-size: 0.75em; }
        .col-key.pk { color: #f39c12; }
        .col-key.fk { color: #3498db; }
        .col-name { flex: 1; font-family: Consolas, monospace; font-size: 0.85em; }
        .col-type { color: #7f8c8d; font-family: Consolas, monospace; font-size: 0.8em; }
        
        .tag { font-size: 0.65em; padding: 2px 6px; border-radius: 10px; background: rgba(255,255,255,0.3); }
        
        table.data-table { width: 100%; border-collapse: collapse; font-size: 0.85em; margin-top: 10px; }
        table.data-table th { background: #f8f9fa; padding: 8px; text-align: left; border-bottom: 2px solid #ddd; font-size: 0.9em; }
        table.data-table td { padding: 6px 8px; border-bottom: 1px solid #eee; }
        table.data-table tr:hover { background: #f8f9fa; }
        
        .relationship-diagram { background: #f8f9fa; border-radius: 8px; padding: 20px; margin: 20px 0; font-family: Consolas, monospace; font-size: 0.85em; line-height: 1.8; white-space: pre; overflow-x: auto; }
        
        .legend { display: flex; gap: 20px; flex-wrap: wrap; margin: 15px 0; padding: 15px; background: #f8f9fa; border-radius: 8px; }
        .legend-item { display: flex; align-items: center; gap: 8px; font-size: 0.85em; }
        .legend-color { width: 20px; height: 20px; border-radius: 4px; }
        
        .rule-box { background: #e8f8f5; border-left: 4px solid #1abc9c; padding: 12px; margin: 10px 0; font-size: 0.9em; }
        .rule-box.warning { background: #fef9e7; border-color: #f39c12; }
        
        @media print { 
            body { background: #fff; padding: 10px; font-size: 12px; } 
            .section { box-shadow: none; border: 1px solid #ddd; page-break-inside: avoid; }
            .entity-card { break-inside: avoid; }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Competition Command - Area Ownership Schema</h1>
        <p class="subtitle">ERD v4 - Complete with ALL Lookup Tables (No Free-Text Decisions)</p>
        <span class="status">PENDING APPROVAL</span>
        <p style="color: #95a5a6; font-size: 0.8em; margin-top: 10px;">Version 4.0 | 12/15/2025</p>
    </div>
    
    <div class="legend">
        <div class="legend-item"><div class="legend-color" style="background:#27ae60;"></div> NEW Table</div>
        <div class="legend-item"><div class="legend-color" style="background:#9b59b6;"></div> LOOKUP Table (Picklist)</div>
        <div class="legend-item"><div class="legend-color" style="background:#95a5a6;"></div> EXISTING Table</div>
        <div class="legend-item"><span style="color:#f39c12;font-weight:bold;">PK</span> Primary Key</div>
        <div class="legend-item"><span style="color:#3498db;font-weight:bold;">FK</span> Foreign Key</div>
    </div>
    
    <!-- ========== LOOKUP TABLES SECTION ========== -->
    
    <div class="section">
        <h2>ğŸ“‹ LOOKUP TABLES (6 Total) - All Decision Fields</h2>
        <p style="color:#7f8c8d;margin-bottom:15px;">Every field that requires a selection/decision has a corresponding lookup table. NO free-text for decisions.</p>
        
        <div class="table-grid">
            <!-- 1. PropertyType -->
            <div class="entity-card lookup">
                <div class="entity-header">PropertyType <span class="tag">LOOKUP</span></div>
                <div class="entity-body">
                    <div class="col-row pk"><span class="col-key pk">PK</span><span class="col-name">PropertyTypeId</span><span class="col-type">INT</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">PropertyTypeName</span><span class="col-type">NVARCHAR(30)</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">Abbreviation</span><span class="col-type">NVARCHAR(10)</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">SortOrder</span><span class="col-type">INT</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">IsActive</span><span class="col-type">BIT</span></div>
                </div>
            </div>
            
            <!-- 2. OwnershipType -->
            <div class="entity-card lookup">
                <div class="entity-header">OwnershipType <span class="tag">LOOKUP</span></div>
                <div class="entity-body">
                    <div class="col-row pk"><span class="col-key pk">PK</span><span class="col-name">OwnershipTypeId</span><span class="col-type">INT</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">OwnershipTypeName</span><span class="col-type">NVARCHAR(50)</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">ProductCode</span><span class="col-type">NVARCHAR(20)</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">Description</span><span class="col-type">NVARCHAR(100)</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">IsActive</span><span class="col-type">BIT</span></div>
                </div>
            </div>
            
            <!-- 3. OwnershipStatusType -->
            <div class="entity-card lookup">
                <div class="entity-header">OwnershipStatusType <span class="tag">LOOKUP</span></div>
                <div class="entity-body">
                    <div class="col-row pk"><span class="col-key pk">PK</span><span class="col-name">StatusTypeId</span><span class="col-type">INT</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">StatusName</span><span class="col-type">NVARCHAR(20)</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">Description</span><span class="col-type">NVARCHAR(100)</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">AllowsCampaigns</span><span class="col-type">BIT</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">SortOrder</span><span class="col-type">INT</span></div>
                </div>
            </div>
            
            <!-- 4. EndReasonType -->
            <div class="entity-card lookup">
                <div class="entity-header">EndReasonType <span class="tag">LOOKUP</span></div>
                <div class="entity-body">
                    <div class="col-row pk"><span class="col-key pk">PK</span><span class="col-name">EndReasonTypeId</span><span class="col-type">INT</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">ReasonName</span><span class="col-type">NVARCHAR(30)</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">Description</span><span class="col-type">NVARCHAR(100)</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">RequiresNote</span><span class="col-type">BIT</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">SortOrder</span><span class="col-type">INT</span></div>
                </div>
            </div>
            
            <!-- 5. ActionType -->
            <div class="entity-card lookup">
                <div class="entity-header">ActionType <span class="tag">LOOKUP</span></div>
                <div class="entity-body">
                    <div class="col-row pk"><span class="col-key pk">PK</span><span class="col-name">ActionTypeId</span><span class="col-type">INT</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">ActionName</span><span class="col-type">NVARCHAR(30)</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">Description</span><span class="col-type">NVARCHAR(100)</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">IsSystemAction</span><span class="col-type">BIT</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">SortOrder</span><span class="col-type">INT</span></div>
                </div>
            </div>
            
            <!-- 6. WaitlistStatusType -->
            <div class="entity-card lookup">
                <div class="entity-header">WaitlistStatusType <span class="tag">LOOKUP</span></div>
                <div class="entity-body">
                    <div class="col-row pk"><span class="col-key pk">PK</span><span class="col-name">WaitlistStatusTypeId</span><span class="col-type">INT</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">StatusName</span><span class="col-type">NVARCHAR(20)</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">Description</span><span class="col-type">NVARCHAR(100)</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">IsFinal</span><span class="col-type">BIT</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">SortOrder</span><span class="col-type">INT</span></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ========== LOOKUP DATA ========== -->
    
    <div class="section">
        <h2>ğŸ“Š LOOKUP TABLE DATA (Picklist Values)</h2>
        
        <h3>1. PropertyType</h3>
        <table class="data-table">
            <tr><th>ID</th><th>Name</th><th>Abbrev</th><th>Sort</th></tr>
            <tr><td>0</td><td>Single Family Residential</td><td>SFR</td><td>1</td></tr>
            <tr><td>1</td><td>Condominium</td><td>Condo</td><td>2</td></tr>
            <tr><td>2</td><td>Townhouse</td><td>TH</td><td>3</td></tr>
            <tr><td>3</td><td>Multi-Family</td><td>MF</td><td>4</td></tr>
        </table>
        
        <h3>2. OwnershipType (Product)</h3>
        <table class="data-table">
            <tr><th>ID</th><th>Name</th><th>ProductCode</th><th>Description</th></tr>
            <tr><td>1</td><td>Competition Command</td><td>CC</td><td>Circle prospecting on competitor listings</td></tr>
            <tr><td>2</td><td>Listing Command</td><td>LC</td><td>Marketing for your own listings</td></tr>
            <tr><td>3</td><td>Neighborhood Command</td><td>NC</td><td>Geo-farming a neighborhood</td></tr>
        </table>
        
        <h3>3. OwnershipStatusType</h3>
        <table class="data-table">
            <tr><th>ID</th><th>Name</th><th>Description</th><th>AllowsCampaigns</th></tr>
            <tr><td>1</td><td>Pending</td><td>Requested, awaiting approval</td><td>No</td></tr>
            <tr><td>2</td><td>Active</td><td>Currently owning, campaigns running</td><td><b>Yes</b></td></tr>
            <tr><td>3</td><td>Suspended</td><td>Temporarily paused (payment, etc.)</td><td>No</td></tr>
            <tr><td>4</td><td>Ended</td><td>Terminated (see EndReasonTypeId)</td><td>No</td></tr>
        </table>
        
        <h3>4. EndReasonType</h3>
        <table class="data-table">
            <tr><th>ID</th><th>Name</th><th>Description</th><th>RequiresNote</th></tr>
            <tr><td>1</td><td>Canceled</td><td>Customer voluntarily canceled</td><td>No</td></tr>
            <tr><td>2</td><td>Expired</td><td>Subscription ended, not renewed</td><td>No</td></tr>
            <tr><td>3</td><td>NonPayment</td><td>Failed payment</td><td>No</td></tr>
            <tr><td>4</td><td>Transferred</td><td>Moved to another user</td><td><b>Yes</b></td></tr>
            <tr><td>5</td><td>AdminRemoved</td><td>Removed by admin</td><td><b>Yes</b></td></tr>
            <tr><td>6</td><td>Upgraded</td><td>Moved to different tier</td><td>No</td></tr>
            <tr><td>7</td><td>Downgraded</td><td>Reduced coverage</td><td>No</td></tr>
            <tr style="background:#fff3cd;"><td>99</td><td>Other</td><td>Other reason</td><td><b>Yes (Required)</b></td></tr>
        </table>
        
        <h3>5. ActionType (for History)</h3>
        <table class="data-table">
            <tr><th>ID</th><th>Name</th><th>Description</th><th>IsSystem</th></tr>
            <tr><td>1</td><td>Created</td><td>New ownership record created</td><td>No</td></tr>
            <tr><td>2</td><td>Approved</td><td>Request approved by admin</td><td>No</td></tr>
            <tr><td>3</td><td>Activated</td><td>Ownership activated (campaigns can run)</td><td>No</td></tr>
            <tr><td>4</td><td>Suspended</td><td>Temporarily suspended</td><td>No</td></tr>
            <tr><td>5</td><td>Resumed</td><td>Resumed from suspension</td><td>No</td></tr>
            <tr><td>6</td><td>Ended</td><td>Ownership terminated</td><td>No</td></tr>
            <tr><td>7</td><td>Modified</td><td>Details updated</td><td>No</td></tr>
            <tr><td>8</td><td>Transferred</td><td>Transferred to another user</td><td>No</td></tr>
            <tr><td>9</td><td>Migrated</td><td>Imported from legacy system</td><td><b>Yes</b></td></tr>
            <tr><td>10</td><td>PaymentFailed</td><td>Auto-action from billing system</td><td><b>Yes</b></td></tr>
            <tr><td>11</td><td>PaymentRestored</td><td>Auto-action from billing system</td><td><b>Yes</b></td></tr>
        </table>
        
        <h3>6. WaitlistStatusType</h3>
        <table class="data-table">
            <tr><th>ID</th><th>Name</th><th>Description</th><th>IsFinal</th></tr>
            <tr><td>1</td><td>Waiting</td><td>In queue, waiting for availability</td><td>No</td></tr>
            <tr><td>2</td><td>Notified</td><td>Area available, awaiting response</td><td>No</td></tr>
            <tr><td>3</td><td>Accepted</td><td>Accepted offer, became owner</td><td><b>Yes</b></td></tr>
            <tr><td>4</td><td>Expired</td><td>Did not respond in time</td><td><b>Yes</b></td></tr>
            <tr><td>5</td><td>Canceled</td><td>User removed from waitlist</td><td><b>Yes</b></td></tr>
            <tr><td>6</td><td>Skipped</td><td>Passed, stays in queue</td><td>No</td></tr>
        </table>
    </div>
    
    <!-- ========== MAIN TABLES ========== -->
    
    <div class="section">
        <h2>ğŸ—ƒï¸ MAIN TABLES (4 Total)</h2>
        
        <div class="table-grid">
            <!-- AreaOwnership -->
            <div class="entity-card new">
                <div class="entity-header">AreaOwnership <span class="tag">MAIN</span></div>
                <div class="entity-body">
                    <div class="col-row pk"><span class="col-key pk">PK</span><span class="col-name">AreaOwnershipId</span><span class="col-type">INT IDENTITY</span></div>
                    <div class="col-row fk"><span class="col-key fk">FK</span><span class="col-name">AspNetUserId</span><span class="col-type">NVARCHAR(128)</span></div>
                    <div class="col-row fk"><span class="col-key fk">FK</span><span class="col-name">AreaId</span><span class="col-type">INT</span></div>
                    <div class="col-row fk"><span class="col-key fk">FK</span><span class="col-name">PropertyTypeId</span><span class="col-type">INT</span></div>
                    <div class="col-row fk"><span class="col-key fk">FK</span><span class="col-name">OwnershipTypeId</span><span class="col-type">INT</span></div>
                    <div class="col-row fk"><span class="col-key fk">FK</span><span class="col-name">StatusTypeId</span><span class="col-type">INT</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">RequestDate</span><span class="col-type">DATETIME2</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">ApprovalDate</span><span class="col-type">DATETIME2</span></div>
                    <div class="col-row fk"><span class="col-key fk">FK</span><span class="col-name">ApprovedByUserId</span><span class="col-type">NVARCHAR(128)</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">StartDate</span><span class="col-type">DATETIME2</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">EndDate</span><span class="col-type">DATETIME2</span></div>
                    <div class="col-row fk"><span class="col-key fk">FK</span><span class="col-name">EndReasonTypeId</span><span class="col-type">INT</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">EndReasonNote</span><span class="col-type">NVARCHAR(200)</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">Notes</span><span class="col-type">NVARCHAR(500)</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">CreatedDate</span><span class="col-type">DATETIME2</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">ModifiedDate</span><span class="col-type">DATETIME2</span></div>
                    <div class="col-row fk"><span class="col-key fk">FK</span><span class="col-name">ModifiedByUserId</span><span class="col-type">NVARCHAR(128)</span></div>
                </div>
            </div>
            
            <!-- AreaOwnershipHistory -->
            <div class="entity-card new">
                <div class="entity-header">AreaOwnershipHistory <span class="tag">AUDIT</span></div>
                <div class="entity-body">
                    <div class="col-row pk"><span class="col-key pk">PK</span><span class="col-name">AreaOwnershipHistoryId</span><span class="col-type">INT IDENTITY</span></div>
                    <div class="col-row fk"><span class="col-key fk">FK</span><span class="col-name">AreaOwnershipId</span><span class="col-type">INT</span></div>
                    <div class="col-row fk"><span class="col-key fk">FK</span><span class="col-name">ActionTypeId</span><span class="col-type">INT</span></div>
                    <div class="col-row fk"><span class="col-key fk">FK</span><span class="col-name">PreviousStatusTypeId</span><span class="col-type">INT</span></div>
                    <div class="col-row fk"><span class="col-key fk">FK</span><span class="col-name">NewStatusTypeId</span><span class="col-type">INT</span></div>
                    <div class="col-row fk"><span class="col-key fk">FK</span><span class="col-name">ActionByUserId</span><span class="col-type">NVARCHAR(128)</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">ActionDate</span><span class="col-type">DATETIME2</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">Notes</span><span class="col-type">NVARCHAR(500)</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">AdditionalData</span><span class="col-type">NVARCHAR(MAX)</span></div>
                </div>
            </div>
            
            <!-- AreaWaitlist -->
            <div class="entity-card new">
                <div class="entity-header">AreaWaitlist <span class="tag">NEW</span></div>
                <div class="entity-body">
                    <div class="col-row pk"><span class="col-key pk">PK</span><span class="col-name">AreaWaitlistId</span><span class="col-type">INT IDENTITY</span></div>
                    <div class="col-row fk"><span class="col-key fk">FK</span><span class="col-name">AspNetUserId</span><span class="col-type">NVARCHAR(128)</span></div>
                    <div class="col-row fk"><span class="col-key fk">FK</span><span class="col-name">AreaId</span><span class="col-type">INT</span></div>
                    <div class="col-row fk"><span class="col-key fk">FK</span><span class="col-name">PropertyTypeId</span><span class="col-type">INT</span></div>
                    <div class="col-row fk"><span class="col-key fk">FK</span><span class="col-name">OwnershipTypeId</span><span class="col-type">INT</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">QueuePosition</span><span class="col-type">INT</span></div>
                    <div class="col-row fk"><span class="col-key fk">FK</span><span class="col-name">WaitlistStatusTypeId</span><span class="col-type">INT</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">RequestDate</span><span class="col-type">DATETIME2</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">NotifiedDate</span><span class="col-type">DATETIME2</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">ExpirationDate</span><span class="col-type">DATETIME2</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">ResolvedDate</span><span class="col-type">DATETIME2</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">Notes</span><span class="col-type">NVARCHAR(500)</span></div>
                </div>
            </div>
            
            <!-- AreaCampaignHistory -->
            <div class="entity-card new">
                <div class="entity-header">AreaCampaignHistory <span class="tag">METRICS</span></div>
                <div class="entity-body">
                    <div class="col-row pk"><span class="col-key pk">PK</span><span class="col-name">AreaCampaignHistoryId</span><span class="col-type">INT IDENTITY</span></div>
                    <div class="col-row fk"><span class="col-key fk">FK</span><span class="col-name">AreaOwnershipId</span><span class="col-type">INT</span></div>
                    <div class="col-row fk"><span class="col-key fk">FK</span><span class="col-name">PropertyCastId</span><span class="col-type">INT</span></div>
                    <div class="col-row fk"><span class="col-key fk">FK</span><span class="col-name">PropertyCollDetailId</span><span class="col-type">INT</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">CampaignDate</span><span class="col-type">DATETIME2</span></div>
                    <div class="col-row fk"><span class="col-key fk">FK</span><span class="col-name">PropertyTypeId</span><span class="col-type">INT</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">MessagesSent</span><span class="col-type">INT</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">MessagesDelivered</span><span class="col-type">INT</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">Clicks</span><span class="col-type">INT</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">CTASubmitted</span><span class="col-type">INT</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">CTAVerified</span><span class="col-type">INT</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">AgentNotifications</span><span class="col-type">INT</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">OptOuts</span><span class="col-type">INT</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">TwilioCost</span><span class="col-type">DECIMAL(10,4)</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">AgentNotifyCost</span><span class="col-type">DECIMAL(10,4)</span></div>
                    <div class="col-row"><span class="col-key"></span><span class="col-name">TotalCost</span><span class="col-type">COMPUTED</span></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ========== RELATIONSHIP DIAGRAM ========== -->
    
    <div class="section">
        <h2>ğŸ”— RELATIONSHIP DIAGRAM</h2>
        
        <div class="relationship-diagram">
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚   AspNetUsers    â”‚ (EXISTING)
                                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
                                    â”‚ Id          [PK] â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                                   â”‚                                   â”‚
         â–¼ 1:N                               â–¼ 1:N                               â–¼ 1:N
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AreaOwnership  â”‚                 â”‚   AreaWaitlist  â”‚                 â”‚ AreaOwnership   â”‚
â”‚  (AspNetUserId) â”‚                 â”‚  (AspNetUserId) â”‚                 â”‚(ApprovedByUserId)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                                                    (Self-Ref)
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                                                                                 â”‚
         â–¼ 1:N                                                                             â–¼ 1:N
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚AreaOwnershipHistory â”‚                                                    â”‚AreaCampaignHistory  â”‚
â”‚  (AreaOwnershipId)  â”‚                                                    â”‚  (AreaOwnershipId)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


LOOKUP TABLE RELATIONSHIPS:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PropertyType â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â–º AreaOwnership.PropertyTypeId
                           â”œâ”€â”€â–º AreaWaitlist.PropertyTypeId
                           â””â”€â”€â–º AreaCampaignHistory.PropertyTypeId

OwnershipType â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â–º AreaOwnership.OwnershipTypeId
                           â””â”€â”€â–º AreaWaitlist.OwnershipTypeId

OwnershipStatusType â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â–º AreaOwnership.StatusTypeId
                           â”œâ”€â”€â–º AreaOwnershipHistory.PreviousStatusTypeId
                           â””â”€â”€â–º AreaOwnershipHistory.NewStatusTypeId

EndReasonType â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º AreaOwnership.EndReasonTypeId

ActionType â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º AreaOwnershipHistory.ActionTypeId

WaitlistStatusType â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º AreaWaitlist.WaitlistStatusTypeId

ViewArea â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â–º AreaOwnership.AreaId
                           â””â”€â”€â–º AreaWaitlist.AreaId

PropertyCast â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º AreaCampaignHistory.PropertyCastId
        </div>
    </div>
    
    <!-- ========== RULES ========== -->
    
    <div class="section">
        <h2>ğŸ“ DESIGN RULES APPLIED</h2>
        
        <div class="rule-box">
            <b>âœ… Rule 1: No Free-Text Decisions</b><br>
            Every field that requires a selection (type, status, reason, action) now has a corresponding lookup table with predefined values.
        </div>
        
        <div class="rule-box">
            <b>âœ… Rule 2: Notes Are Allowed</b><br>
            Free-text fields like <code>Notes</code>, <code>EndReasonNote</code>, and <code>AdditionalData</code> are acceptable because they are supplementary information, not decision fields.
        </div>
        
        <div class="rule-box warning">
            <b>âš ï¸ Rule 3: "Other" Requires Note</b><br>
            When EndReasonTypeId = 99 (Other), the <code>EndReasonNote</code> field becomes REQUIRED. This is enforced at the application layer.
        </div>
        
        <div class="rule-box">
            <b>âœ… Rule 4: Lookup Tables Have Metadata</b><br>
            All lookup tables include: Description, SortOrder, and an active/system flag for future-proofing.
        </div>
    </div>
    
    <!-- ========== TABLE COUNT ========== -->
    
    <div class="section">
        <h2>ğŸ“Š TABLE SUMMARY</h2>
        
        <table class="data-table">
            <tr><th>Category</th><th>Count</th><th>Tables</th></tr>
            <tr><td><b>LOOKUP Tables</b></td><td>6</td><td>PropertyType, OwnershipType, OwnershipStatusType, EndReasonType, ActionType, WaitlistStatusType</td></tr>
            <tr><td><b>MAIN Tables</b></td><td>4</td><td>AreaOwnership, AreaOwnershipHistory, AreaWaitlist, AreaCampaignHistory</td></tr>
            <tr><td><b>EXISTING Tables</b></td><td>4</td><td>AspNetUsers, ViewArea, PolygonNameOverride, PropertyCast</td></tr>
            <tr style="background:#e8f8f5;"><td><b>TOTAL NEW</b></td><td><b>10</b></td><td>6 lookup + 4 main</td></tr>
        </table>
    </div>
    
    <div style="text-align:center;padding:20px;color:#95a5a6;font-size:0.8em;">
        FR-001: Area Ownership & Waitlist System | Version 4.0 | 12/15/2025 | PENDING APPROVAL
    </div>
</body>
</html>

